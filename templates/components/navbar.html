{% load role_tags %}
<nav class="bg-card shadow-sm w-screen">
    <div class="w-full flex justify-center border-b border-border sm:px-6 lg:px-8">
        <div class="w-full max-w-7xl flex flex-wrap items-center justify-between gap-4 py-3 px-4">
            <a href="/" class="flex items-center gap-3">
                {% load static %}
                <img src="{% static 'images/branding/logo-light.png' %}"
                     alt="dhet_app"
                     class="h-10 w-auto block dark:hidden">
                <img src="{% static 'images/branding/logo-dark.png' %}"
                     alt="dhet_app"
                     class="h-10 w-auto hidden dark:block">
            </a>
            <div class="flex flex-wrap items-center gap-2 text-xs text-muted-foreground sm:text-sm">
                <span class="flex items-center gap-1 rounded-full bg-muted/40 px-3 py-1">
                    <i data-lucide="at-sign" class="w-4 h-4"></i>
                    <span class="hidden sm:inline">{{ user.username }}</span>
                </span>
                {% if show_api_docs %}
                    <a href="/api/docs/"
                       target="_blank"
                       rel="noopener noreferrer"
                       class="flex items-center gap-1 rounded-lg px-3 py-1 text-primary transition hover:bg-primary/5">
                        <i data-lucide="book-open" class="w-4 h-4"></i>
                        <span class="hidden sm:inline">API</span>
                    </a>
                {% endif %}
                {% if show_admin %}
                    <a href="/admin/"
                       target="_blank"
                       rel="noopener noreferrer"
                       class="flex items-center gap-1 rounded-lg px-3 py-1 text-primary transition hover:bg-primary/5">
                        <i data-lucide="shield" class="w-4 h-4"></i>
                        <span class="hidden sm:inline">Admin</span>
                    </a>
                {% endif %}
                <form method="post"
                      action="{% url 'account_logout' %}"
                      class="inline-flex items-center">
                    {% csrf_token %}
                    <button type="submit"
                            class="flex items-center gap-1 rounded-lg px-3 py-1 text-destructive transition hover:bg-destructive/5">
                        <i data-lucide="power" class="w-4 h-4"></i>
                        <span class="hidden sm:inline">Logout</span>
                    </button>
                </form>
            </div>
        </div>
    </div>
    {% if not show_onboarding %}
        {% with current=request.resolver_match.url_name %}
            <div class="w-full flex justify-center">
                <div class="w-full max-w-7xl flex flex-wrap gap-6 px-4">
                    {# Dashboard - visible to all authenticated users #}
                    {# Dashboard - visible to all authenticated users EXCEPT admins #}
                    {% if not show_admin %}
                        <a href="/dashboard"
                           class="relative flex items-center gap-2 py-4 text-sm font-medium transition-colors {% if current == 'dashboard' or current == 'user-dashboard' or current == 'content-manager-dashboard' %}text-primary after:absolute after:bottom-0 after:left-0 after:h-0.5 after:w-full after:bg-primary{% else %}text-muted-foreground hover:text-card-foreground{% endif %}"
                           aria-current="{% if current == 'dashboard' or current == 'user-dashboard' or current == 'content-manager-dashboard' %}page{% endif %}">
                            <i data-lucide="layout-dashboard" class="w-4 h-4"></i>
                            <span class="hidden md:inline">Dashboard</span>
                        </a>
                    {% endif %}
                    {# Profile - visible to all authenticated users #}
                    <a href="{{ profile_url }}"
                       class="relative flex items-center gap-2 py-4 text-sm font-medium transition-colors {% if current == 'user-profile' or current == 'developer-profile' or current == 'content-manager-profile' or current == 'admin-profile' or current == 'super-profile' %}text-primary after:absolute after:bottom-0 after:left-0 after:h-0.5 after:w-full after:bg-primary{% else %}text-muted-foreground hover:text-card-foreground{% endif %}"
                       aria-current="{% if current == 'user-profile' or current == 'developer-profile' or current == 'content-manager-profile' or current == 'admin-profile' or current == 'super-profile' %}page{% endif %}">
                        <i data-lucide="user" class="w-4 h-4"></i>
                        <span class="hidden md:inline">Profile</span>
                    </a>
                </div>
            </div>
        {% endwith %}
    {% endif %}
</div>
</nav>
